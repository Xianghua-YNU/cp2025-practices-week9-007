# 实验报告

## 一、实验目的

- 掌握通过几何相似变换（基于生成元思想）构造分形曲线的方法。
- 理解如何利用复数表示平面点，并用迭代方法生成科赫曲线和闵可夫斯基香肠曲线。
- 熟悉分形曲线的生成原理及其可视化方法。

## 二、实验过程

1. **算法设计与实现**
   - 采用复数表示平面上的点，利用复数运算实现线段的缩放、旋转和平移。
   - 实现 `koch_generator(level)` 和 `minkowski_generator(level)` 两个函数，分别生成科赫曲线和闵可夫斯基香肠曲线的点序列。
   - 每次迭代，对当前所有线段应用生成元规则，插入新点，形成下一层级的点序列。
   - **（可选）在此插入你认为关键的代码片段：**
     ```python
     koch_generator 函数
python
```
def koch_generator(u, level):
    u = np.array([0, 1j])  # 初始竖直线段

    if level <= 0:
        return u

    theta = np.pi/3  # 旋转角度
    for _ in range(level):
        new_u = []
        for i in range(len(u)-1):
            start = u[i]
            end = u[i+1]

            # 生成科赫曲线的四个新线段
            p1 = start
            p2 = start + (end - start)/3
            p3 = p2 + (end - start)/3 * np.exp(1j*theta)
            p4 = start + 2*(end - start)/3
            p5 = end

            new_u.extend([p1, p2, p3, p4, p5])

        u = np.array(new_u)

    return u
```
     # 例如，科赫曲线生成函数的主要部分

# 创建2x2子图布局
fig, axs = plt.subplots(2, 2, figsize=(10, 10))

# 生成不同层级的科赫曲线
for i in range(4):
    koch_points = koch_generator(init_u, i + 1)
    axs[i // 2, i % 2].plot(koch_points.real, koch_points.imag, 'k-', lw=1)
    axs[i // 2, i % 2].set_title(f"Koch Curve Level {i + 1}")
    axs[i // 2, i % 2].axis('equal')
    axs[i // 2, i % 2].axis('off')

     ```

2. **绘图与展示**
   - 使用 `matplotlib` 绘制不同迭代层级下的分形曲线。
   - 采用子图网格展示不同层级的分形效果，设置合适的标题和坐标比例。
   - **（可选）插入绘图相关的代码片段：**
     ```python
     # 例如，绘制分形曲线的代码
     plt.plot(points.real, points.imag)
     ```
![image](https://github.com/user-attachments/assets/2e8c58eb-123b-4218-94fd-15262608f838)
![image](https://github.com/user-attachments/assets/d18e00f5-17d9-496e-bdf9-b3f9f84dd2b2)

3. **遇到的问题与解决方法**
   - （请在此填写你在实现过程中遇到的具体问题及解决思路，如复数运算、点插入顺序、图像显示等。）

## 三、结果展示
![image](https://github.com/user-attachments/assets/638023a0-0569-4949-905d-3b819151a445)
![image](https://github.com/user-attachments/assets/3ed8926c-f0aa-41d1-af26-ac2cc8f25c4b)

### 1. 科赫曲线（Koch Curve）

- 插入生成的科赫曲线各层级图像（如 `koch_curves.png`）。
- 简要说明各层级分形结构的变化。
- **（可选）插入生成图像的代码片段。**
![image](https://github.com/user-attachments/assets/115043b5-0d52-4ec3-856b-b29a81e1099d)
Level 1
初始线段被三等分，中间线段被替换为以其为底边的等边三角形的两条边，形成由 4 条线段组成的折线结构 ，出现了一个尖锐的 “凸起”，这是科赫曲线分形特征的起始形态。
Level 2
在 Level 1 的基础上，每一条线段再次被三等分，中间线段又被替换为等边三角形的两条边。此时，原本的 4 条线段各自重复上述操作，使得曲线的 “锯齿” 状结构更加明显，折线数量增多，整体变得更加曲折，“凸起” 的数量也相应增加。
Level 3
Level 2 的每一条线段继续按照规则进行三等分和替换操作。曲线进一步细化，“锯齿” 结构不断重复和加密，更多更小的 “凸起” 出现，曲线的长度显著增加，其分形特征更加丰富，整体轮廓开始呈现出类似雪花边缘的复杂形态。
Level 4
Level 3 的各条线段依旧重复分形规则。曲线的细节达到了更高的精细度，“锯齿” 结构无限嵌套，密密麻麻的 “凸起” 布满曲线各处，曲线长度进一步增长，自相似性在各个局部和整体上都得到充分体现，展现出典型的分形几何形态。 随着层级增加，科赫曲线不断在局部和整体上重复相似的结构，且越来越复杂，体现了分形的自相似特性。

### 2. 闵可夫斯基香肠曲线（Minkowski Sausage）

- 插入生成的闵可夫斯基香肠曲线各层级图像（如 `minkowski_sausages.png`）。
- 简要说明各层级分形结构的变化。
- **（可选）插入生成图像的代码片段。**
![image](https://github.com/user-attachments/assets/03b01a0d-8964-486f-a9e2-7855a6c08860)
Level 1
曲线开始初步呈现分形特征，在原本简单的线段基础上，通过特定规则进行变换，出现了由直角转折构成的 “凸”“凹” 形状，形成类似简单折线组合的结构，是后续复杂形态的基础构建单元。
Level 2
相较于 Level 1，结构明显变得复杂。Level 1 中的每个线段都按照分形规则进一步细分，原本的直角转折处又衍生出更多相同形态的小结构，整体曲线的曲折程度增加，出现更多的 “凸”“凹” 组合，开始展现出较为丰富的分形图案。
Level 3
分形结构进一步细化。Level 2 中的各个部分再次细分，每一小段都继续按照规则生成新的结构，曲线的细节急剧增多，形成了更为错综复杂的图案，“凸”“凹” 形态层层嵌套，整体轮廓开始呈现出类似香肠状的分形特征，曲线长度大幅增加。
Level 4
分形的精细程度达到更高水平。Level 3 中的每一处结构再次迭代细分，曲线的细节极其丰富，几乎布满整个视觉空间，“凸”“凹” 形态无限循环嵌套，曲线长度持续增长，其分形特征更加明显，整体图案的复杂性和自相似性得到充分体现。 随着层级增加，闵可夫斯基香肠曲线不断在局部和整体上重复相似的结构，展现出分形几何的自相似特性 。

## 四、结果分析与思考

- 分析分形曲线的自相似性和复杂度随迭代层级的变化。
- 自相似性
科赫曲线：从最初的线段开始，每次迭代都在局部重复相同的操作，即把线段三等分，用等边三角形的两条边替换中间线段。在不同层级下，整体曲线和局部细节都呈现出相似的形态，如 Level 1 中出现的 “凸起” 结构，在后续层级中不断在更小尺度上重复，无论观察整个曲线还是其中的一小段，其形状特征都具有相似性，只是尺度不同 。随着迭代层级增加，自相似结构不断细分和复制，这种特性始终保持且愈发明显。
闵可夫斯基香肠曲线：同样具备自相似性。起始时形成的直角转折构成的基本形状，在后续迭代中，每一小段都按照相同规则进一步细分，生成与整体相似的小结构。像 Level 1 中的折线组合形态，在 Level 2、3、4 中不断在各个局部重现，只是结构越来越精细，无论从宏观还是微观角度观察，曲线的形态特征都具有一致性，体现了严格的自相似规律。
复杂度
科赫曲线：初始状态为简单线段，复杂度较低。随着迭代层级升高，线段数量呈指数增长，每一次迭代都使线段数量变为原来的 4 倍，曲线的曲折程度急剧增加，“凸起” 等细节不断增多，原本简单的线条逐渐演变成极其复杂、布满细节的图案，需要更多的计算和描述来呈现其形态，复杂度呈指数级上升 。
闵可夫斯基香肠曲线：起始形态相对简单，仅由少量直角转折构成。但随着迭代进行，每一次迭代都将线段进一步细分，生成更多的小折线结构。从 Level 1 到 Level 4 ，曲线的结构从稀疏变得密集，细节越来越丰富，需要更多的几何信息来描述其形状，复杂度不断提升，且提升速度随着层级增加愈发显著 。
总体而言，科赫曲线和闵可夫斯基香肠曲线在迭代过程中，自相似性始终贯穿其中，是分形的本质特征；而复杂度则随着迭代层级不断攀升，展现出分形几何从简单到复杂的奇妙演变。

- 讨论基于复数的迭代方法与传统递归方法的优缺点。
- ### 自相似性
 - **科赫曲线**：从最初的线段开始，每次迭代都在局部重复相同的操作，即把线段三等分，用等边三角形的两条边替换中间线段。在不同层级下，整体曲线和局部细节都呈现出相似的形态，如Level 1中出现的“凸起”结构，在后续层级中不断在更小尺度上重复，无论观察整个曲线还是其中的一小段，其形状特征都具有相似性，只是尺度不同 。随着迭代层级增加，自相似结构不断细分和复制，这种特性始终保持且愈发明显。
 - **闵可夫斯基香肠曲线**：同样具备自相似性。起始时形成的直角转折构成的基本形状，在后续迭代中，每一小段都按照相同规则进一步细分，生成与整体相似的小结构。像Level 1中的折线组合形态，在Level 2、3、4 中不断在各个局部重现，只是结构越来越精细，无论从宏观还是微观角度观察，曲线的形态特征都具有一致性，体现了严格的自相似规律。

### 复杂度
 - **科赫曲线**：初始状态为简单线段，复杂度较低。随着迭代层级升高，线段数量呈指数增长，每一次迭代都使线段数量变为原来的 4 倍，曲线的曲折程度急剧增加，“凸起”等细节不断增多，原本简单的线条逐渐演变成极其复杂、布满细节的图案，需要更多的计算和描述来呈现其形态，复杂度呈指数级上升 。
 - **闵可夫斯基香肠曲线**：起始形态相对简单，仅由少量直角转折构成。但随着迭代进行，每一次迭代都将线段进一步细分，生成更多的小折线结构。从Level 1到Level 4 ，曲线的结构从稀疏变得密集，细节越来越丰富，需要更多的几何信息来描述其形状，复杂度不断提升，且提升速度随着层级增加愈发显著 。

总体而言，科赫曲线和闵可夫斯基香肠曲线在迭代过程中，自相似性始终贯穿其中，是分形的本质特征；而复杂度则随着迭代层级不断攀升，展现出分形几何从简单到复杂的奇妙演变。 
- 思考初始线段方向、生成元参数等对分形形态的影响。
- ### 基于复数的迭代方法
#### 优点
- **直观简洁**：复数天然适合描述平面上的点和向量，在分形曲线等图形绘制中，用复数表示点序列，代码逻辑与数学原理契合度高，能简洁直观地表达迭代规则。例如在科赫曲线、闵可夫斯基香肠曲线生成中，通过复数运算实现线段的变换，代码可读性好 。
- **运算高效**：借助NumPy等库对复数数组的高效支持，复数的加、减、乘等运算可快速执行，尤其处理大规模点序列迭代时，性能优势明显，能有效减少计算时间。
- **几何意义清晰**：复数的实部和虚部分别对应平面坐标的x和y轴，其乘法运算包含旋转和缩放，在分形曲线迭代生成中，利用复数乘法实现线段旋转等操作，几何意义明确，方便理解迭代过程中的图形变换。

#### 缺点
- **适用范围窄**：主要适用于能用复平面表示、具有一定几何特性的问题，对于非平面几何或与复数几何意义关联不大的问题，难以发挥作用。
- **学习成本**：对于不熟悉复数运算及其几何意义的开发者，理解和掌握基于复数的迭代方法需要花费一定时间和精力，在调试相关代码时，也可能因复数运算的特殊性而增加难度。

### 传统递归方法
#### 优点
- **逻辑清晰**：对于具有递归结构的问题，如分形曲线生成，递归方法能直接模拟问题的分解和求解过程，将大问题转化为相似小问题，代码逻辑与问题结构一致，便于理解和设计算法。
- **代码简洁**：通过函数自身调用实现迭代，无需显式循环控制，在解决递归结构明显的问题时，代码简洁紧凑，可减少代码量，提高开发效率。

#### 缺点
- **性能问题**：每次递归调用都会在调用栈创建新栈帧，保存函数状态和参数，递归深度过大会占用大量内存，易导致栈溢出错误。同时，函数调用开销也会影响执行效率，尤其处理大规模数据或高迭代层级时，性能下降明显。
- **调试困难**：由于递归调用过程复杂，函数多次调用自身，调试时难以跟踪变量状态和执行流程，排查错误相对困难。 
- （可选）尝试生成科赫雪花或修改生成元，观察分形变化。

---

**注：请在每一部分补充你自己的实验内容、图像、分析和关键代码。**
